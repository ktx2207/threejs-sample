<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>three.jsサンプル</title>
    <script src="./lib/three.min.js"></script>
    <style>
        *{padding:0px; margin:0px}
        div#canvas-frame{
            width: 500px;
            height: 500px;
        }
    </style>
    <script>
        window.addEventListener("load", function() {
           threeStart();
        });
        function threeStart() {
            initThree();
            initCamera();
            initObject();
            draw();
        }

        var renderer,scene,canvasFrame;

        function initThree() {
            canvasFrame = document.getElementById('canvas-frame');
            renderer = new  THREE.WebGLRenderer();
            if (!renderer) alert("three.jsの初期化に失敗しました。");
            // レンダラーオブジェクトのサイズ指定
            renderer.setSize(canvasFrame.clientWidth, canvasFrame.clientHeight);

            canvasFrame.appendChild(renderer.domElement);
            // レンダラーオブジェクトのクリアーカラー設定
            renderer.setClearColor(0xEEEEEE, 1.0);
            // シーンオブジェクトの生成
            scene = new THREE.Scene();
        }

        var camera;
        function initCamera() {
            camera = new THREE.PerspectiveCamera(45, canvasFrame.clientWidth / canvasFrame.clientHeight, 1, 10000);

            // カメラ位置設定
            camera.position.set(100,100,50);
            // カメラの上ベクトルの設定
            camera.up.set(0,0,1);
            // カメラの中心位置ベクトルの設定
            camera.lookAt({x: 0, y: 0, z: 0});
        }

        var axis; // 軸オブジェクト
        function initObject() {
            // グループを生成
            var objectGroup = new THREE.Group();

            // 軸オブジェクトの生成
            axis = new THREE.AxisHelper(50);
            // グループに軸オブジェクトを追加
            objectGroup.add(axis);
            // 軸オブジェクトの位置座標を設定
            axis.position.set(0, 0, 0);
            // グリッドオブジェクトの生成
            var grid = new THREE.GridHelper(50, 10);
            grid.rotation.set(Math.PI/2, 0, 0);
            objectGroup.add(grid);

            // 形状オブジェクトを生成
            var geometry = new THREE.BoxGeometry(50, 50, 50, 1, 1, 5);
            // 材質オブジェクトを生成
            var material = new THREE.MeshNormalMaterial({opacity: 0.3, transparent:true});
            // 直方体を生成
            var cube = new THREE.Mesh(geometry, material);
            // 直方体をグループに追加
            objectGroup.add(cube);

            // 平面オブジェクトを追加
            geometry = new THREE.PlaneGeometry(100, 100, 10, 10);
            material = new THREE.MeshNormalMaterial({opacity: 0.8, transparent:true});
            var plane = new THREE.Mesh(geometry, material);
            plane.position.setZ(10);
            objectGroup.add(plane);

            // オブジェクトグループをシーンに追加
            scene.add(objectGroup);
        }

        function draw() {
            renderer.render(scene, camera);
        }

    </script>
</head>
<body>
    <div id="canvas-frame"></div>
</body>
</html>